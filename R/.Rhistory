MexEast<- crs.convert(data = subset(jaguar_df,project_region=='Mexico East'),
crs.input = "+proj=longlat +datum=WGS84",
crs.output = "+proj=utm +zone=16Q +south +datum=WGS84 +units=m +no_defs",
point.names = c("utm_x", "utm_y", "long_x", "lat_y"))
MexEast$date <- as.character(MexEast$date)
MexEast$date <- as.POSIXct(MexEast$date, format ="%Y-%m-%d %H:%M:%S", tz = "Etc/GMT+6")
#'
#'
#' Mexico Sonora 17)
Sonora<- crs.convert(data = subset(jaguar_df,project_region=='Mexico Sonora'),
crs.input = "+proj=longlat +datum=WGS84",
crs.output = "+proj=utm +zone=12R +south +datum=WGS84 +units=m +no_defs",
point.names = c("utm_x", "utm_y", "long_x", "lat_y"))
Sonora$date <- as.character(Sonora$date)
Sonora$date <- as.POSIXct(Sonora$date, format ="%Y-%m-%d %H:%M:%S", tz = "Etc/GMT+7")
#'
#'  Mexico
Mex=rbind(Lacandona,MexEast,Sonora)
#'
#'
#'
#' ###  PANTANAL
#'
#' 18) PantanalTotal Brazil&Paraguay   -  7 Projects in total, all in the same UTM zone
#'
Pantanal<- crs.convert(data = subset(jaguar_df,project_bioveg=='Pantanal'),
crs.input = "+proj=longlat +datum=WGS84",
crs.output = "+proj=utm +zone=21K +south +datum=WGS84 +units=m +no_defs",
point.names = c("utm_x", "utm_y", "long_x", "lat_y"))
Pantanal$date <- as.character(Pantanal$date)
Pantanal$date <- as.POSIXct(Pantanal$date, format ="%Y-%m-%d %H:%M:%S", tz = "Etc/GMT+4")
#'
#'
#' ###  Jaguar Dataframe with UTMs
#' head(AFW1);head(AFW2);head(Caatinga);head(Cerrado1);head(Cerrado2);head(CRica);head(Pantanal);head(Drych1);str(Drych)
#' head(Hch);head(FPy);head(Iguazu1);head(Iguazu2);head(Mamiraua);head(iopPA);head(Lacandona);head(MexEast);head(Sonora)
jaguar_df=rbind(AFW1,AFW2,Caatinga,Cerrado1,Cerrado2,CRica,Pantanal,Drych1,Drych2,Hch,FPy,Iguazu1,Iguazu2,Mamiraua,iopPA,Lacandona,MexEast,Sonora)
#' Need re-order the data again
jaguar_ord <- jaguar_df[order(jaguar_df$id,jaguar_df$date),]
jaguar_df <- jaguar_ord
#'
#' And create a new Event_ID
jaguar_df$Event_ID <- seq.int(nrow(jaguar_df))
#' Save as an additional object
jaguar<-jaguar_df
#' In case we want save and read it as txt
# write.table(jaguar_df,file="../data/jaguar_df.txt",row.names = F,quote=F,col.names=T,sep="\t")
# jaguar <- read.delim(file="../data/jaguar_df.txt")
#'
#'
#'
head(jaguar_df)
#' ## Creating a track in amt
# Commom to both RSF and SSF and based on UTM and project regions
#'
#' ### ATLANTIC FOREST WEST  (Project regions 1 and 2)
#'
#' Atlantic Forest West
AFWtrk <- trk.convert(data = AFW,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=22K +south +datum=WGS84 +units=m +no_defs"))
#' Objects for AFW project regions
AFW1trk=AFWtrk %>% filter(project_region == "Atlantic Forest W1")
AFW2trk=AFWtrk %>% filter(project_region == "Atlantic Forest W2")
#'###  CAATINGA
#'
#' 3) Caatinga
Caatingatrk <- trk.convert(data = Caatinga,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=23L +south +datum=WGS84 +units=m +no_defs"))
#'
#' ###  CERRADO   (2 Projects: 4 and 5)
#'
#' 4) Cerrado1
Cerrado1trk <- trk.convert(data = Cerrado1,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=22K +south +datum=WGS84 +units=m +no_defs"))
#' 5) Cerrado2
Cerrado2trk <- trk.convert(data = Cerrado2,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=22L +south +datum=WGS84 +units=m +no_defs"))
#' Cerradotrk
Cerradotrk=rbind(Cerrado1trk,Cerrado2trk)
#'
#'
#' ###  COSTA RICA
#'
#' 6) Costa Rica
CRicatrk <- trk.convert(data = CRica,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=16P +north +datum=WGS84 +units=m +no_defs"))
#' ### DRY CHACO
#'
#' 7) Drych1
Drych1trk <- trk.convert(data = Drych1,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=20K +south +datum=WGS84 +units=m +no_defs"))
#' 8) Drych2
Drych2trk <- trk.convert(data = Drych2,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=21K +south +datum=WGS84 +units=m +no_defs"))
#'
#'  DRY CHACO trk => Drychtrk
Drychtrk=rbind(Drych1trk,Drych2trk)
#'
#'
#' ### HUMID CHACO
#'
#' 9) Humid Chaco
Hchtrk <- trk.convert(data = Hch,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=21K +south +datum=WGS84 +units=m +no_defs"))
#'
#'
#' ###   FOREST PARAGUAY
#' 10) Forest Paraguay
FPytrk <- trk.convert(data = FPy,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=21J +south +datum=WGS84 +units=m +no_defs"))
#'
#'
#' ### IGUAZU
#'
#' 11) Iguazu1
Iguazu1trk <- trk.convert(data = Iguazu1,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=21J +south +datum=WGS84 +units=m +no_defs"))
#'
#' 12) Iguazu2
Iguazu2trk <- trk.convert(data = Iguazu2,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=22J +south +datum=WGS84 +units=m +no_defs"))
#'
#'  Iguazutrk
Iguazutrk=rbind(Iguazu1trk,Iguazu2trk)
#'
#'
#' ###   AMAZONIA
#' 13) Flooded  Amazonia, Mamiraua (Brazil)
Mamirauatrk <- trk.convert(data = Mamiraua,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=20M +south +datum=WGS84 +units=m +no_defs"))
#'
#'
#' 14   Dry/ East Amazonia, IOP PA, translocated
iopPAtrk <- trk.convert(data = iopPA,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=22M +south +datum=WGS84 +units=m +no_defs"))
#'
#'
#' ### Greater Lacandona, Mexico
#'
#' 15) Lacandona
Lacandonatrk <- trk.convert(data = Lacandona,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=15Q +south +datum=WGS84 +units=m +no_defs"))
#'
#'
#' 16) MexEast, Mexico
MexEasttrk <- trk.convert(data = MexEast,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=16Q +south +datum=WGS84 +units=m +no_defs"))
#'
#'
#' ### Sonora, Mexico
#'
#' 17)  Sonora
Sonoratrk <- trk.convert(data = Sonora,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=12R +south +datum=WGS84 +units=m +no_defs"))
#'
#'
#' ###   PANTANAL
#'
#' 18) PantanalTotal Brazil&Paraguay  -  7 Projects in total, all in the same UTM zone
Pantanaltrk <- trk.convert(data = Pantanal,
.x=utm_x,
.y=utm_y,
.t=date,
id=id,
project_region=project_region,
sex=sex,
age=age,
weight=weight,
status=status,
period=period,
long_x=long_x,
lat_y=lat_y,
crs = CRS("+proj=utm +zone=21K +south +datum=WGS84 +units=m +no_defs"))
#'
#' Objects for Pantanal project regions
Oncafaritrk=Pantanaltrk %>% filter(project_region == "Oncafari")
Paraguaytrk=Pantanaltrk %>% filter(project_region == "Pantanal Paraguay")
Panthera1trk=Pantanaltrk %>% filter(project_region == "Panthera1")
Panthera2trk=Pantanaltrk %>% filter(project_region == "Panthera2")
RioNegrotrk=Pantanaltrk %>% filter(project_region == "Rio Negro")
SaoBentotrk=Pantanaltrk %>% filter(project_region == "Sao Bento")
Taiamatrk=Pantanaltrk %>% filter(project_region == "Taiama")
#'
#'
#' ###    ALL  JAGUARS  trk =>     jaguartrk
#'
#' All Project regions trk
jaguartrk=rbind(AFW1trk,AFW2trk,Caatingatrk,Cerrado1trk,Cerrado2trk,CRicatrk,Drychtrk, Hchtrk,FPytrk,Iguazutrk,
Mamirauatrk,iopPAtrk,Lacandonatrk, MexEasttrk, Sonoratrk,Oncafaritrk,Paraguaytrk,Panthera1trk,
Panthera2trk,RioNegrotrk,SaoBentotrk,Taiamatrk)
jaguartrk
#'
#'
#' Dataframe for each individual (to run if we need any specic individual)
X1=subset(jaguar_df,id=='1')
X2=subset(jaguar_df,id=='2')
X3=subset(jaguar_df,id=='3')
X4=subset(jaguar_df,id=='4')
X5=subset(jaguar_df,id=='5')
X6=subset(jaguar_df,id=='6')
X7=subset(jaguar_df,id=='7')
X8=subset(jaguar_df,id=='8')
X9=subset(jaguar_df,id=='9')
X10=subset(jaguar_df,id=='10')
X11=subset(jaguar_df,id=='11')
X12=subset(jaguar_df,id=='12')
X13=subset(jaguar_df,id=='13')
X14=subset(jaguar_df,id=='14')
X15=subset(jaguar_df,id=='15')
X16=subset(jaguar_df,id=='16')
X17=subset(jaguar_df,id=='17')
X18=subset(jaguar_df,id=='18')
X19=subset(jaguar_df,id=='19')
X20=subset(jaguar_df,id=='20')
X21=subset(jaguar_df,id=='21')
X22=subset(jaguar_df,id=='22')
X23=subset(jaguar_df,id=='23')
X24=subset(jaguar_df,id=='24')
X25=subset(jaguar_df,id=='25')
X26=subset(jaguar_df,id=='26')
X27=subset(jaguar_df,id=='27')
X28=subset(jaguar_df,id=='28')
X29=subset(jaguar_df,id=='29')
X30=subset(jaguar_df,id=='30')
X31=subset(jaguar_df,id=='31')
X32=subset(jaguar_df,id=='32')
X33=subset(jaguar_df,id=='33')
X34=subset(jaguar_df,id=='34')
X35=subset(jaguar_df,id=='35')
X36=subset(jaguar_df,id=='36')
X37=subset(jaguar_df,id=='37')
X38=subset(jaguar_df,id=='38')
X39=subset(jaguar_df,id=='39')
X40=subset(jaguar_df,id=='40')
X41=subset(jaguar_df,id=='41')
X42=subset(jaguar_df,id=='42')
X43=subset(jaguar_df,id=='43')
X44=subset(jaguar_df,id=='44')
X45=subset(jaguar_df,id=='45')
X46=subset(jaguar_df,id=='46')
X47=subset(jaguar_df,id=='47')
X48=subset(jaguar_df,id=='48')
X49=subset(jaguar_df,id=='49')
X50=subset(jaguar_df,id=='50')
X51=subset(jaguar_df,id=='51')
X52=subset(jaguar_df,id=='52')
X53=subset(jaguar_df,id=='53')
X54=subset(jaguar_df,id=='54')
X55=subset(jaguar_df,id=='55')
X56=subset(jaguar_df,id=='56')
X57=subset(jaguar_df,id=='57')
X58=subset(jaguar_df,id=='58')
X59=subset(jaguar_df,id=='59')
X60=subset(jaguar_df,id=='60')
X61=subset(jaguar_df,id=='61')
X62=subset(jaguar_df,id=='62')
X63=subset(jaguar_df,id=='63')
X64=subset(jaguar_df,id=='64')
X65=subset(jaguar_df,id=='65')
X66=subset(jaguar_df,id=='66')
X67=subset(jaguar_df,id=='67')
X68=subset(jaguar_df,id=='68')
X69=subset(jaguar_df,id=='69')
X70=subset(jaguar_df,id=='70')
X71=subset(jaguar_df,id=='71')
X72=subset(jaguar_df,id=='72')
X73=subset(jaguar_df,id=='73')
X74=subset(jaguar_df,id=='74')
X75=subset(jaguar_df,id=='75')
X76=subset(jaguar_df,id=='76')
X77=subset(jaguar_df,id=='77')
X78=subset(jaguar_df,id=='78')
X79=subset(jaguar_df,id=='79')
X80=subset(jaguar_df,id=='80')
X81=subset(jaguar_df,id=='81')
X82=subset(jaguar_df,id=='82')
X83=subset(jaguar_df,id=='83')
X84=subset(jaguar_df,id=='84')
X85=subset(jaguar_df,id=='85')
X86=subset(jaguar_df,id=='86')
X87=subset(jaguar_df,id=='87')
X88=subset(jaguar_df,id=='88')
X89=subset(jaguar_df,id=='89')
X90=subset(jaguar_df,id=='90')
X91=subset(jaguar_df,id=='91')
X92=subset(jaguar_df,id=='92')
X93=subset(jaguar_df,id=='93')
X94=subset(jaguar_df,id=='94')
X95=subset(jaguar_df,id=='95')
X96=subset(jaguar_df,id=='96')
X97=subset(jaguar_df,id=='97')
X98=subset(jaguar_df,id=='98')
X99=subset(jaguar_df,id=='99')
X100=subset(jaguar_df,id=='100')
X101=subset(jaguar_df,id=='101')
X102=subset(jaguar_df,id=='102')
X103=subset(jaguar_df,id=='103')
X104=subset(jaguar_df,id=='104')
X105=subset(jaguar_df,id=='105')
X106=subset(jaguar_df,id=='106')
X107=subset(jaguar_df,id=='107')
X108=subset(jaguar_df,id=='108')
X109=subset(jaguar_df,id=='109')
X110=subset(jaguar_df,id=='110')
X111=subset(jaguar_df,id=='111')
X112=subset(jaguar_df,id=='112')
X113=subset(jaguar_df,id=='113')
X114=subset(jaguar_df,id=='114')
X115=subset(jaguar_df,id=='115')
X116=subset(jaguar_df,id=='116')
X117=subset(jaguar_df,id=='117')
#'
#' Produce an output using ezknitr
ezspin(file = "JaguarDataPrep.R", out_dir = "reports",
params = list("DATASET_NAME" = "jaguar.dat"),
keep_html = TRUE, keep_rmd = TRUE)
open_output_dir()
#' Other info
sessionInfo()
proc.time()
